---
layout: post
title: "Solid State"
description: "Why the solid-state drive is the biggest change in storage tech since the hard drive."
summary: "The solid-state drive is the biggest change in storage
technology since hard drives, and I finally get on board."
mood: speedy
music: "The Beach Boys: I Get Around"
---
If there's a faster way to get to my data that doesn't require a RAM
disk, I'm all ears.  The solid state drive is that good, and that's no
exaggeration or fabrication.  Follow me as I explore two upgrades.

## IdeaPad P400 Touch

I've had my IdeaPad for more than two years now, and one thing has
always bugged me about it.  The processor isn't it; with a fast 1600 MHz
memory bus and turbo burst up to 3.2 GHz, plus eight-way processing,
there's not a whole lot to complain about.  Likewise with the memory
bus: sure, it's only dual-channel, but when each channel is wide enough,
that limitation doesn't matter.  The old Sandy Bridge architecture also
has quite passable onboard video, good enough to use for playing
_Fallout 3_ at midrange video settings.  Even the optical drive is good,
an LG DVD-burner that has yet to make a coaster.

The capacious 1 TB hard drive has also been a boon, since it's meant
that I've been able to store plenty of data, including thousands of
digital photographs -- in raw format -- that run to the tune of 20 MB
apiece.  Unfortunately, that capacity has come at a cost, and it leads
me to my biggest source of discontentment with this machine: the
abhorrent performance of the hard drive.

## Specs as shipped

This laptop features the following hardware:

* CPU: Intel Core i7-3632QM (2.2/3.2 GHz, 4 cores/8 threads)
* HDD: Samsung Spinpoint M8, 1 TB/5400 RPM/8 MB cache
* ODD: LG CD/DVD multi-burner
* Display: 1600x900 multi-touch, 14.1"
* GPU: Intel HD 4000, part of the Core i7 processor
* Input: Crappy backlit keyboard, crappy plastic touchpad
* Power: Not enough battery
* OS: Windows 8 originally, Windows 10 officially unsupported but works fine
* RAM: 8 GB DDR3 1600 MHz PC3-12800
* BIOS: UEFI with Secure Boot

## The price vs. performance conundrum

In 2013, when this laptop was made, 1 TB in a hard drive for a laptop
was still considered high-end.  To get that kind of capacity at a
somewhat reasonable unit price for IHVs, hard drive makers were forced
to consider compromises to the price-performance equation.
Unsurprisingly, a fast rotational speed -- the first and most important
prerequisite to good performance -- went right out the window.  The
second most important aspect of performance -- a large cache -- also
went right out.

Brace yourself, because these stats are cringeworthy.

* Drive: Samsung ST1000LM024 HN-M101MBB, aka Spinpoint M8, stated
  capacity of 1 TB.

* Capacity: As expected, exactly 1 trillion bytes, or about 932 GiB.

* Spindle speed: 5400 RPM.  Not bad for power conservation; terrible for
  performance.

* Cache.  8,192 KiB.  You did not read that incorrectly: the cache is
  pathetically tiny for such a large hard drive.  (My old Seagate
  Momentus 7200.4 had a 16 MiB cache in 2010.  That's not a misprint
  either.)

* Power conservation: Yes.  I suspect that Lenovo (and Samsung, the
  drive manufacturer) took the easy, pathetically cheap way out and
  conserved power by reducing the spindle speed.  It didn't work when
  Apple still shipped laptops with 4200 (or 3600!) RPM hard drives, and
  it doesn't work now.  Well, actually, it does work, but it makes the
  drive perform like ass.

* Interface: SATA/300, aka SATA II, aka "It was fast in 2005, but not
  now."  The onboard SATA controller, which is part of the Sandy Bridge
  chipset, is SATA III, which is good news.

* Other stuff: At least this drive features NCQ.

* The model number might have you thinking it's a Seagate, which it is,
  just in Samsung wrapping.  That's good to know -- Seagate and Hitachi
  (once IBM, now part of Western Digital) are the brands of hard drive I
  trust.

The Spinpoint at least features the stated capacity, making it an
excellent storage drive for static and semi-static content.  That's why
I've decided to upgrade to something a little more era-appropriate.

Meet the Mushkin Enhanced Reactor SSD.

* Drive: Mushkin Enhanced Reactor, stated capacity of 512 GB.

* Capacity: As expected, exactly 500 billion bytes, or about 477 GiB.

* Cache: 512 MB DDR3 RAM.  (!!!!)

* Power conservation: None needed or provided.

* Interface: SATA III, aka "we made this just for SSDs"

* Other stuff: MLC chips, NCQ, 1500G shock tolerance, 0.04 W idle power,
  assembled in USA

This bad boy features half a terabyte of storage space, a maximum
sequential read rate of 560 MB/s (compare to 67.27 MB/s for sequential
reads on my Samsung rotational drive), and a maximum sequential write
rate of 460 MB/s (compare 47.27 MB/s).

So, then, let's do some benchmarking.  I started things off by running
CrystalDiskMark on Windows 10 with the Samsung Spinpoint M8.  I ran five
runs with a 500 MB test file.  All figures in MB/s, and computed
**after** defragmenting the hard drive.

* Seq Q32T1: 67.27 write/47.27 read
* 4K Q32T1: 0.321 write/0.509 read
* Seq: 73.61 write/46.14 read
* 4K: 0.176 write/0.388 read

I then timed a cold boot and warm boot by shutting the laptop down and timing the boot with my Casio watch's stopwatch.

* Cold boot: 1:13.26.  This was timed from the pressing of the power
  button to the lock screen.  I then paused the stopwatch, entered my
  password, and resumed the clock after pressing Enter.  I watched the
  clock until all icons loaded on my taskbar, and once my notification
  area was stable, I stopped.  Programs still loaded for a few minutes
  after I stopped the clock, but the computer was useful immediately
  after I stopped.

* Warm boot: 4:52.46.  This was timed from issuing the restart command
  from the Windows 10 Start Menu until the same point as the cold boot.
  After logging in, I timed until all icons appeared on the taskbar.
  This computer's warm boot performance is pathetic with a rotational
  hard drive.

With the SSD installed, I got into Windows -- with a wrongly typed
password -- in less than a minute, including 13 seconds to the password
prompt.  I don't remember the exact figure the first time I tested this,
but it was somewhere in the neighborhood of 42 seconds to the desktop at
a "usable" state.

The benchmarks for the SSD are as follows (R/W, MB/s):

* Seq Q32T1: 546.3/454.4
* 4K Q32T1: 255.7/79.28
* Seq: 514.2/447.3
* 4K: 23.54/48.34

Note those 4K random read/write figures.  Sequential reads and writes
are unsurprisingly fast, but because there's no rotational latency
involved, there are no issues with random read performance outside of
the standard cache coherency issues.[^1]  This computer is no longer
severely I/O-bound.  That's a pretty bold statement, but it's the
truth.  (For what it's worth, sequential reads come to 5.463 gigabits
per second adjusted for the encoding of the SATA bus.  More on that
later.)

## User experience

I'm using this computer, and it almost literally feels like applications
are slapping against the screen when they start.  Microsoft Office 365,
in particular, starts instantly.  I can barely gawk at the Word, Excel,
or Publisher start screens, and Outlook isn't much slower.  Starting
Photoshop CC 2015 feels like starting Photoshop 6 on my PowerBook G3,
and that's a good thing!  Lightroom is very quick, too, and managing my
thousands of photos no longer feels like a chore, as it should be.
Google Chrome loads instantaneously, and suddenly browsing the web is no
longer a chore.

I also maxed out the laptop's RAM by upgrading to 16 GB, obviating the
need for a swap file.  Even at full tilt with Lightroom, Photoshop,
several Office apps, and about a dozen Chrome tabs open, I'm lucky to
use much more than 8 or 9 GB of memory.  Without worrying about a swap
file, it's lightning-quick during heavy multitasking, with only the
processor holding me back -- and it takes a lot to max out the
octo-thread processor.  A laptop, with the portability the form factor
implies, is the perfect kind of machine to have this kind of
performance.  I could very nearly replace a workstation with this
laptop.

Copying from the built-in SD card reader (a Realtek USB 2.0 chipset)
maxes out the capabilities of the bus, holding steady at about 32.5 MB/s
from a 16 GB Sony SDHC Class 10 card.  If you really want to see
something crazy, get a second SSD and an enclosure for USB 3.0, and copy
files to it.  You'll probably saturate the USB 3.0 bus before you
saturate the drive's performance potential.

THIS is how computing in 2015 should feel.  Everything feels like I'm in
control, which is how it should be, because I am.  This is why Microsoft
perfected prefetch, and this is why memory prices were driven down, and
this is why Apple can hardly keep MacBooks in stock.  This is why every
computing professional that has experienced it can't stop raving about
solid state storage.  It's _that_ good, _that much_ of a performance
differential.  Hell, I think I even type faster when I use a computer
with an SSD.  I now understand the big deal about Thunderbolt, and PCI-E
storage (which is **even faster**), and all the new technologies that have
revolutionized how we access the information we squirrel away on our
drives.  Magnetic storage for personal computing is at best suited for
high storage capacities.  At worst, it is an artificial impediment
erected between users and their data.  I will never buy another computer
with a hard drive -- it's SSD only, or SSD plus a hard drive, for me
from here on out.

## Uncorking a 6-year-old laptop

Now it's time to get serious.  I bought my venerable ThinkPad X200 in
2009 directly from Lenovo, and I used it through the last two-and-a-half
years of my collegiate studies.  It has been a damn fine laptop
throughout the years I've had it.  Most importantly of late, I've used
it to manage Route 38.

It has a Core 2 Duo P8400 processor (2.26 GHz), 4 GB of RAM
(the Santa Rosa chipset), lousy Intel graphics, and the generally
excellent ICH9 chipset.  The sharp 1280x800 12.1" display gave it
netbook size and the Core 2 Duo processor gave it netbook-shattering
power.  I've replaced the Intel wireless card with an Atheros unit
(actually an AirPort Extreme card from a dead MacBook) to
make it more Linux-friendly, and it's been running Linux pretty much
exclusively since 2013.  To uncork this laptop's top-end power, I bought
a second solid-state drive just for it.  At $49.99, the SanDisk Z400S is
one of the cheapest drives on the market, and with 128 GB of space, it's
plenty for my needs.  I installed a fresh version of Debian 8.2 onto the
drive and watched the sparks fly.  I've got some data to pull off the
old drive, but until then, it's speed city.

I'm still running only 4 GB of RAM in this laptop, but I refuse to dump
even more money into this laptop (although a new RAM door might be nice,
because the old one has lost much of its paint, and a little Tux sticker
wouldn't go amiss on the Logo key, since this rig will never run Windows
again)

After testing the performance by using `hdparm -t /dev/sda2` as root, I
was shocked to find that it worked at an astonishingly fast 265.09 MB
per second.  Keep in mind that this laptop was made in 2009, before the
advent of SATA III, and that the drive should, by all rights, be
saturating the SATA bus -- which it appears to be doing.  Theoretically,
the 3 Gbps SATA II connection should be capable of 300 MBps[^2], but that's
the maximum capability of the protocol, not of any one controller.  The
throughput of the controller -- which corresponds to 2.65 Gbps after
correcting for 10-bit encoding -- reflects well on the laptop's chipset,
especially considering that it's midrange laptop components as of late
2008 stuffed into an ultraportable and (presumably) detuned to produce
less heat.

Booting this laptop is instantaneous, or nearly so, as is shutting it
down.  I counted 21.75 seconds from a cold boot to the login prompt, and
on a fresh installation of Debian 8.2 with the MATE environment (as God
intended), the desktop is immediately ready to go.  LibreOffice, GIMP,
and Iceweasel all load within two seconds, maximum.  I always thought
this laptop had the perfect form factor to be an ideal writer's machine,
but now I know it's the perfect laptop for writing by the sheer virtue
of its insanely fast response time.  If Microsoft would release a
desktop version of Office 2016 for Linux, I'd be all ears, but until
then, it's plain old LibreOffice and Google Drive for me.

[^1]: The two hardest problems in computer science are naming things, cache coherency, and off-by-one errors.

[^2]: SATA uses a line encoding system called 8b/10b encoding, whereby 10 bits of bandwidth are used to transmit 8 bits of data.
